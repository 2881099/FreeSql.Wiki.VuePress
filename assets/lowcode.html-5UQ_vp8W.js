import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o,c as e,a as s,b as n,d as c,w as u,e as l}from"./app-Ei_nagbl.js";const i={},k=s("h1",{id:"低代码",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#低代码","aria-hidden":"true"},"#"),n(" 低代码")],-1),r=l(`<p>FreeSql 默认依赖实体类型，虽然运行时可以动态创建 Type，但不断的动态编译导致会内存无法释放，对 Type 的版本也难以管理。</p><p>本功能是独立的，使用纯字典（无实体类型）进行 CRUD，支持导航属性，级联操作等功能。</p><p>注意：本功能是独立的，请勿与其他文档的级联机制搞混。</p><h2 id="字典-cud-单表" tabindex="-1"><a class="header-anchor" href="#字典-cud-单表" aria-hidden="true">#</a> 字典 CUD（单表）</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> dic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dic<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dic<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fsql<span class="token punctuation">.</span><span class="token function">InsertDict</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AsTable</span><span class="token punctuation">(</span><span class="token string">&quot;table1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExecuteAffrows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fsql<span class="token punctuation">.</span><span class="token function">UpdateDict</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AsTable</span><span class="token punctuation">(</span><span class="token string">&quot;table1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WherePrimary</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExecuteAffrows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fsql<span class="token punctuation">.</span><span class="token function">DeleteDict</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AsTable</span><span class="token punctuation">(</span><span class="token string">&quot;table1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExecuteAffrows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fsql<span class="token punctuation">.</span><span class="token function">InsertOrUpdateDict</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AsTable</span><span class="token punctuation">(</span><span class="token string">&quot;table1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WherePrimary</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ExecuteAffrows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>InsertDict/UpdateDict/DeleteDict/InsertOrUpdateDict 都支持批量操作，对应类型 List&lt;Dictionary&lt;string, object&gt;&gt;</p><h2 id="无类型-crud-更高级" tabindex="-1"><a class="header-anchor" href="#无类型-crud-更高级" aria-hidden="true">#</a> 无类型 CRUD（更高级）</h2><p>不依赖实体类型，不需要动态编译，纯字典操作，支持导航属性，级联保存，AOT 编译福音。</p><p>nuget 安装：</p><blockquote><p>dotnet add package FreeSql.Extensions.ZeroEntity</p></blockquote><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ZeroDbContext</span><span class="token punctuation">(</span>fsql<span class="token punctuation">,</span> JsonConvert<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeserializeObject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>TableDescriptor<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在文档后面</span>

<span class="token class-name"><span class="token keyword">var</span></span> item <span class="token operator">=</span> JsonConvert<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeserializeObject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">@&quot;
{
  &quot;&quot;Name&quot;&quot;:&quot;&quot;user1&quot;&quot;,
  &quot;&quot;Ext&quot;&quot;:
  {
    &quot;&quot;Remarks&quot;&quot;:[{&quot;&quot;Remark&quot;&quot;:&quot;&quot;remark1&quot;&quot;},{&quot;&quot;Remark&quot;&quot;:&quot;&quot;remark2&quot;&quot;}]
  },
  &quot;&quot;Claims&quot;&quot;:[{&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim1&quot;&quot;},{&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim2&quot;&quot;},{&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim3&quot;&quot;}],
  &quot;&quot;Roles&quot;&quot;:[{&quot;&quot;Name&quot;&quot;:&quot;&quot;role1&quot;&quot;},{&quot;&quot;Name&quot;&quot;:&quot;&quot;role2&quot;&quot;}]
}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">var</span></span> item2 <span class="token operator">=</span> JsonConvert<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeserializeObject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">@&quot;
{
  &quot;&quot;Id&quot;&quot;:1,
  &quot;&quot;Name&quot;&quot;:&quot;&quot;user1111&quot;&quot;,
  &quot;&quot;Ext&quot;&quot;:{},
  &quot;&quot;Claims&quot;&quot;:[{&quot;&quot;Id&quot;&quot;:1,&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim1111&quot;&quot;},{&quot;&quot;Id&quot;&quot;:&quot;&quot;3&quot;&quot;,&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim3222222&quot;&quot;},{&quot;&quot;ClaimName&quot;&quot;:&quot;&quot;claim0000&quot;&quot;}],
  &quot;&quot;Roles&quot;&quot;:[{&quot;&quot;Name&quot;&quot;:&quot;&quot;role111100001&quot;&quot;},{&quot;&quot;Id&quot;&quot;:2,&quot;&quot;Name&quot;&quot;:&quot;&quot;role2&quot;&quot;}]
}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span>item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span><span class="token punctuation">)</span> OUTPUT INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>N<span class="token string">&#39;role1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>N<span class="token string">&#39;role2&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span><span class="token keyword">User</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span><span class="token punctuation">)</span> OUTPUT INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>N<span class="token string">&#39;user1&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserExt<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserExtRemarks<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>RemarkId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Remark<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#39;6570e3f8-a226-c3ac-00d1-a3dd18b30339&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;remark1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&#39;6570e3f8-a226-c3ac-00d1-a3de16d9aa68&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;remark2&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserClaim<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span><span class="token punctuation">)</span> OUTPUT INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;claim1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;claim2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;claim3&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserRole<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>Role<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span><span class="token punctuation">)</span> OUTPUT INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>N<span class="token string">&#39;role111100001&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>N<span class="token string">&#39;role2&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserClaim<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span><span class="token punctuation">)</span> OUTPUT INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> INSERTED<span class="token punctuation">.</span><span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token string">&#39;claim0000&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">[</span>UserRole<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserRole<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserRole<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserClaim<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">[</span><span class="token keyword">User</span><span class="token punctuation">]</span> <span class="token keyword">SET</span> <span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token operator">=</span> N<span class="token string">&#39;user1111&#39;</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">[</span>UserClaim<span class="token punctuation">]</span> <span class="token keyword">SET</span> <span class="token punctuation">[</span>ClaimName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">CASE</span> <span class="token punctuation">[</span>Id<span class="token punctuation">]</span>
<span class="token keyword">WHEN</span> <span class="token number">1</span> <span class="token keyword">THEN</span> N<span class="token string">&#39;claim1111&#39;</span>
<span class="token keyword">WHEN</span> <span class="token number">3</span> <span class="token keyword">THEN</span> N<span class="token string">&#39;claim3222222&#39;</span> <span class="token keyword">END</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserRole<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token operator">OR</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token punctuation">[</span>RoleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserClaim<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>UserExt<span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>UserId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span><span class="token keyword">User</span><span class="token punctuation">]</span> <span class="token keyword">WHERE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>Id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查询，返回结果是字典 Dictionary&lt;string, object&gt;：</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token comment">//自动级联</span>
ctx<span class="token punctuation">.</span>Select<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//单独查询</span>
ctx<span class="token punctuation">.</span><span class="token function">SelectNoTracking</span><span class="token punctuation">(</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">//.IncludeAll()</span>
  <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Ext.Remarks&quot;</span><span class="token punctuation">,</span> then <span class="token operator">=&gt;</span> then<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">&quot;remark&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;like&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Roles&quot;</span><span class="token punctuation">,</span> then <span class="token operator">=&gt;</span> then<span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Users&quot;</span><span class="token punctuation">,</span>
    then <span class="token operator">=&gt;</span> then<span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span><span class="token string">&quot;Ext.Remarks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//普通多表查询</span>
ctx<span class="token punctuation">.</span><span class="token function">SelectNoTracking</span><span class="token punctuation">(</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">LeftJoin</span><span class="token punctuation">(</span><span class="token string">&quot;UserExt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;UserId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;User.Id&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[{id:1, UserExt:{} },..]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述 ctx 对象依赖 json 配置如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;用户表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Id&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;IsIdentity&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.String&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Navigates&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Ext&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;OneToOne&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserExt&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Claims&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;OneToMany&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserClaim&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Bind&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Roles&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;ManyToMany&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;Role&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ManyToMany&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserRole&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Indexes&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserExt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;用户扩展信息表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Navigates&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Remarks&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;OneToMany&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserExtRemarks&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Bind&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserExtRemarks&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;用户扩展信息表-子表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;RemarkId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Guid&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Remark&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.String&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserClaim&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;一对多测试表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Id&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;IsIdentity&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;ClaimName&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.String&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Role&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;权限表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Id&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;IsIdentity&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.String&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Navigates&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Users&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;ManyToMany&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;ManyToMany&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserRole&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Indexes&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserRole&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Comment&quot;</span><span class="token operator">:</span><span class="token string">&quot;多对多中间表&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Columns&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;RoleId&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;IsPrimary&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;MapType&quot;</span><span class="token operator">:</span><span class="token string">&quot;System.Int32&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Navigates&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;ManyToOne&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Bind&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token property">&quot;Name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Role&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Type&quot;</span><span class="token operator">:</span><span class="token string">&quot;ManyToOne&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;RelTable&quot;</span><span class="token operator">:</span><span class="token string">&quot;Role&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;Bind&quot;</span><span class="token operator">:</span><span class="token string">&quot;RoleId&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="级联机制" tabindex="-1"><a class="header-anchor" href="#级联机制" aria-hidden="true">#</a> 级联机制</h2><p>理解本机制之前，请先忘记 Repository/DbContext 等之前的级联机制，他们没有关联。</p><p>schemas[] 是一组表映射信息定义，包含表名、列名、导航属性、索引等信息</p><ul><li>导航属性：OneToOne/OneToMany/ManyToOne/ManyToMany</li><li>聚合根：OneToOne/OneToMany/多对多中间表，作为一个整体看待</li><li>外部根：ManyToOne/ManyToMany外部表，作为外部看待，它有自己的聚合根整体</li></ul><p>举例：</p><ul><li>User 为聚合根</li><li>UserExt/UserClaim/UserRole 这三个表是子成员，一起存储/删除</li><li>Role 为外部根（相对 User 而言，它自己是独立的聚合根）</li></ul><p>CURD 都是基于 schemas[0] 聚合根进行操作</p><ul><li>查询：贪婪加载所有子成员，以及外部根，以及外部根的外部根（递归）</li><li>状态管理：快照聚合根副本（由于外部根也是聚合根，即外部根与聚合根是并行存储关系）</li></ul><p>对比保存：</p><p>将当前操作的聚合根与状态管理的副本进行对比，计算出发生变化的列</p><table><thead><tr><th>导航属性</th><th>副本</th><th>最新</th><th>动作</th></tr></thead><tbody><tr><td>OneToOne</td><td>NULL</td><td>Object</td><td>添加新记录</td></tr><tr><td>OneToOne</td><td>Object</td><td>NULL</td><td>删除副本记录</td></tr><tr><td>OneToOne</td><td>Object</td><td>Object</td><td>发生变化则更新，否则忽略</td></tr><tr><td>OneToMany</td><td>NULL/Empty</td><td>List</td><td>添加最新List记录</td></tr><tr><td>OneToMany</td><td>List</td><td>NULL</td><td>忽略</td></tr><tr><td>OneToMany</td><td>List</td><td>Empty</td><td>删除副本List记录</td></tr><tr><td>OneToMany</td><td>List</td><td>List</td><td>对比保存，计算出添加/更新/删除三种行为</td></tr><tr><td>多对多中间表</td><td></td><td></td><td>与 OneToMany 一致</td></tr></tbody></table><p>插入：</p><ul><li>OneToOne 级联插入</li><li>OneToMany 级联插入</li><li>ManyToOne 先对比保存外部根，关联外部根ID，再插入聚合根</li><li>ManyToMany 先对比保存外部根，插入聚合根，再插入中间表</li></ul><p>更新：</p><ul><li>OneToOne 级联对比保存</li><li>OneToMany 级联对比保存</li><li>ManyToOne 先对比保存外部根，再关联外部根ID，再更新聚合根</li><li>ManyToMany 先对比保存外部根，再更新聚合根，再对比保存中间表</li></ul><p>删除：</p><ul><li>OneToOne 级联删除</li><li>OneToMany 级联删除</li><li>ManyToOne 忽略</li><li>ManyToMany 级联删除中间表（注意不删除外部根）</li></ul>`,33);function d(q,m){const a=p("RouterLink");return o(),e("div",null,[k,s("p",null,[n("本篇是继"),c(a,{to:"/guide/dynamic.html"},{default:u(()=>[n("《动态操作》")]),_:1}),n("文档之后的大功能，专门为低代码设计。")]),r])}const b=t(i,[["render",d],["__file","lowcode.html.vue"]]);export{b as default};
