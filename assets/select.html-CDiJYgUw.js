import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as i,e as n,f as a,a as h,d as l,r as d,o as p}from"./app-B8GrNsLa.js";const r={};function u(B,s){const t=d("RouteLink");return p(),e("div",null,[s[87]||(s[87]=i("h1",{id:"查询",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#查询"},[i("span",null,"查询")])],-1)),s[88]||(s[88]=i("p",null,"FreeSql 在查询数据下足了功夫，链式风格、多表查询、表达式函数、导航属性支持得非常到位。",-1)),i("table",null,[s[18]||(s[18]=i("thead",null,[i("tr",null,[i("th"),i("th"),i("th")])],-1)),i("tbody",null,[i("tr",null,[i("td",null,[n(t,{to:"/guide/paging.html"},{default:a(()=>s[0]||(s[0]=[l("《分页查询》")])),_:1})]),i("td",null,[n(t,{to:"/guide/repository.html"},{default:a(()=>s[1]||(s[1]=[l("《仓储层 Repository》")])),_:1})]),i("td",null,[n(t,{to:"/guide/read-write-splitting.html"},{default:a(()=>s[2]||(s[2]=[l("《读写分离》")])),_:1})])]),i("tr",null,[i("td",null,[n(t,{to:"/guide/select-single-table.html"},{default:a(()=>s[3]||(s[3]=[l("《单表查询》")])),_:1})]),i("td",null,[n(t,{to:"/guide/filters.html"},{default:a(()=>s[4]||(s[4]=[l("《过滤器》")])),_:1})]),i("td",null,[n(t,{to:"/guide/linq-to-sql.html"},{default:a(()=>s[5]||(s[5]=[l("《LinqToSql》")])),_:1})])]),i("tr",null,[i("td",null,[n(t,{to:"/guide/select-multi-table.html"},{default:a(()=>s[6]||(s[6]=[l("《多表查询》")])),_:1})]),i("td",null,[n(t,{to:"/guide/select-lazy-loading.html"},{default:a(()=>s[7]||(s[7]=[l("《延时加载》")])),_:1})]),i("td",null,[n(t,{to:"/guide/performance.html"},{default:a(()=>s[8]||(s[8]=[l("《性能》")])),_:1})])]),i("tr",null,[i("td",null,[n(t,{to:"/guide/withtempquery.html"},{default:a(()=>s[9]||(s[9]=[l("《嵌套查询》")])),_:1})]),i("td",null,[n(t,{to:"/guide/select-include.html"},{default:a(()=>s[10]||(s[10]=[l("《贪婪加载》")])),_:1})]),i("td",null,[n(t,{to:"/guide/sharding.html"},{default:a(()=>s[11]||(s[11]=[l("《分表分库》")])),_:1})])]),i("tr",null,[i("td",null,[n(t,{to:"/guide/select-group-by.html"},{default:a(()=>s[12]||(s[12]=[l("《分组聚合查询》")])),_:1})]),i("td",null,[n(t,{to:"/guide/expression-function.html"},{default:a(()=>s[13]||(s[13]=[l("《表达式函数》")])),_:1})]),i("td",null,[n(t,{to:"/guide/multi-tenancy.html"},{default:a(()=>s[14]||(s[14]=[l("《多租户》")])),_:1})])]),i("tr",null,[i("td",null,[n(t,{to:"/guide/select-return-data.html"},{default:a(()=>s[15]||(s[15]=[l("《返回数据》")])),_:1})]),s[16]||(s[16]=i("td",null,null,-1)),s[17]||(s[17]=i("td",null,null,-1))])])]),s[89]||(s[89]=h('<h2 id="表达式函数" tabindex="-1"><a class="header-anchor" href="#表达式函数"><span>表达式函数</span></a></h2><table><thead><tr><th>说明</th><th>Lambda 表达式</th><th>SQL</th></tr></thead><tbody><tr><td>in</td><td>Where(a =&gt; new [] { 1,2,3 }.Contains(a.Id))</td><td>[Id] in (1,2,3)</td></tr><tr><td>not in</td><td>Where(a =&gt; !new [] { 1,2,3 }.Contains(a.Id))</td><td>[Id] not in (1,2,3)</td></tr><tr><td>多列in</td><td>Where(a =&gt; list.Any(b =&gt; b.Item1 == a.Id &amp;&amp; b.Item2 == a.ct1))</td><td>([Id]=1 and [ct1]=1) or ([Id]=2 and [ct1]=2)</td></tr><tr><td>like &#39;%xxx%&#39;</td><td>Where(a =&gt; a.Title.Contains(&quot;xxx&quot;))</td><td>[Title] like &#39;%xxx%&#39;</td></tr><tr><td>like &#39;xxx%&#39;</td><td>Where(a =&gt; a.Title.StartsWith(&quot;xxx&quot;))</td><td>[Title] like &#39;xxx%&#39;</td></tr><tr><td>like &#39;%xxx&#39;</td><td>Where(a =&gt; a.Title.EndsWith(&quot;xxx&quot;))</td><td>[Title] like &#39;%xxx&#39;</td></tr><tr><td>日期范围</td><td>Where(a =&gt; a.Time.Between(time1, time2))</td><td>[Time] between @time1 and @time2</td></tr><tr><td>是否存在</td><td>.Any()</td><td>select 1 from ...</td></tr><tr><td>总数</td><td>.Count()</td><td>select count(*) from ...</td></tr><tr><td>求和</td><td>.Sum(a =&gt; a.Score)</td><td>select sum([Score]) from ...</td></tr><tr><td>平均</td><td>.Avg(a =&gt; a.Score)</td><td>select avg([Score]) from ...</td></tr><tr><td>最大值</td><td>.Max(a =&gt; a.Score)</td><td>select max([Score]) from ...</td></tr><tr><td>最小值</td><td>.Min(a =&gt; a.Score)</td><td>select min([Score]) from ...</td></tr></tbody></table>',2)),i("p",null,[s[20]||(s[20]=l("更详细请前往")),n(t,{to:"/guide/expression-function.html"},{default:a(()=>s[19]||(s[19]=[l("《表达式函数》")])),_:1})]),s[90]||(s[90]=h(`<h2 id="sqlserver-withlock-withindex" tabindex="-1"><a class="header-anchor" href="#sqlserver-withlock-withindex"><span>SqlServer WithLock/WithIndex</span></a></h2><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//SELECT TOP 1 ... FROM [Region] a With(NoLock)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SqlServerLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NoLock</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> |</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> SqlServerLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NoWait</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//SELECT TOP 1 ... FROM [Region] a With(NoLock, NoWait)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;idx_01&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//SELECT TOP 1 ... FROM [Region] a With(index=idx_01, NoLock)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>多表：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> list</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">InnerJoin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">xx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SqlServerLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NoLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Dictionary</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        [</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WithIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;idx_01&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Dictionary</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        [</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;idx_02&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    })</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Limit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//SELECT TOP 1 ..</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//FROM [Region] a With(index=idx_01, NoLock)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//INNER JOIN [T2] b With(index=idx_02) ON a.[x] = b.[xx]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>全局设置 NoLock：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//所有实体类生效</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetGlobalSelectWithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SqlServerLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NoLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//【指定】实体类生效</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SetGlobalSelectWithLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">SqlServerLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">NoLock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Dictionary</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    [</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">typeof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)] </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动态过滤-wheredynamicfilter" tabindex="-1"><a class="header-anchor" href="#动态过滤-wheredynamicfilter"><span>动态过滤 WhereDynamicFilter</span></a></h2><p><a href="https://www.cnblogs.com/FreeSql/p/16485310.html" target="_blank" rel="noopener noreferrer">《高效理解 FreeSql WhereDynamicFilter，深入了解设计初衷》</a></p><p>ISelect.WhereDynamicFilter 方法实现动态过滤条件（与前端交互），支持的操作符：</p><ul><li>Contains/StartsWith/EndsWith/NotContains/NotStartsWith/NotEndsWith：包含/不包含，like &#39;%xx%&#39;，或者 like &#39;xx%&#39;，或者 like &#39;%xx&#39;</li><li>Equal/NotEqual：等于/不等于</li><li>GreaterThan/GreaterThanOrEqual：大于/大于等于</li><li>LessThan/LessThanOrEqual：小于/小于等于</li><li>Range：范围查询</li><li>DateRange：日期范围，有特殊处理 value[1] + 1</li><li>Any/NotAny：是否符合 value 中任何一项（直白的说是 SQL IN）</li><li>Custom：<a href="https://github.com/dotnetcore/FreeSql/discussions/1550" target="_blank" rel="noopener noreferrer">自定义解析</a></li></ul><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DynamicFilterInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dyfilter</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> JsonConvert</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">DeserializeObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DynamicFilterInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">@&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Logic</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">And</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Filters</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    { </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Field</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Operator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Equals</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: 1 },</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    {</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">      &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Logic</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Or</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">      &quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Filters</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      [</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        { </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Field</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Operator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Equals</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: 2 },</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        { </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Field</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Operator</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Equals</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">, </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Value</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&quot;&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: 3 }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      ]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    }</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  ]</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Region</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WhereDynamicFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">dyfilter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ToList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//WHERE id = 1 AND (id = 2 OR id = 3)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>动态表名：ISelect.AsTable((t, old) =&gt; $&quot;{old}_201903&quot;)</p></blockquote><blockquote><p>动态排序：ISelect.OrderByPropertyName(&quot;Parent.Code&quot;)</p></blockquote><blockquote><p>动态返回：ISelect.ToDataTableByPropertyName(new string[] { &quot;Parent.Code&quot;, &quot;Id&quot; })</p></blockquote><blockquote><p>动态贪婪加载：ISelect.IncludeByPropertyName(&quot;Parent.Parent&quot;).IncludeByPropertyName(&quot;Parent.Childs&quot;)</p></blockquote><h2 id="克隆查询-iselect" tabindex="-1"><a class="header-anchor" href="#克隆查询-iselect"><span>克隆查询 ISelect</span></a></h2><p>科普：csharp 7.0 支持本地函数，方法内再定义临时方法，这个特性向大家推荐，在很多时候都非常有效。</p><p>方法内还可以定义方法，那就称它：本地函数/嵌套方法。</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ISelect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AdmRoute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSelect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">fsql</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AdmRoute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Include</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WhereIf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">string</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">IsNullOrEmpty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Contains</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ...)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WhereIf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parent_Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Parent_Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Contains</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">ParentId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        .</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WhereIf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">mn_Roles_Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Roles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Any</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">mn_Roles_Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Contains</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> select1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSelect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> select2</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSelect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    select1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Where</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //此时 select2 不会附加 a.Status == 0 条件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api"><span>API</span></a></h2>`,20)),i("table",null,[s[86]||(s[86]=i("thead",null,[i("tr",null,[i("th",null,"方法"),i("th",null,"返回值"),i("th",null,"参数"),i("th",null,"描述"),i("th")])],-1)),i("tbody",null,[s[28]||(s[28]=i("tr",null,[i("td",null,"ToSql"),i("td",null,"string"),i("td"),i("td",null,"返回即将执行的 SQL 语句"),i("td")],-1)),s[29]||(s[29]=i("tr",null,[i("td",null,"ToList"),i("td",null,"List<T1>"),i("td"),i("td",null,"执行 SQL 查询，返回 T1 实体所有字段的记录，若存在导航属性则一起查询返回，记录不存在时返回 Count 为 0 的列表"),i("td")],-1)),s[30]||(s[30]=i("tr",null,[i("td",null,"ToList<T>"),i("td",null,"List<T>"),i("td",null,"Lambda"),i("td",null,"执行 SQL 查询，返回指定字段的记录，记录不存在时返回 Count 为 0 的列表"),i("td")],-1)),s[31]||(s[31]=i("tr",null,[i("td",null,"ToList<T>"),i("td",null,"List<T>"),i("td",null,"string field"),i("td",null,"执行 SQL 查询，返回 field 指定字段的记录，并以元组或基础类型(int,string,long)接收，记录不存在时返回 Count 为 0 的列表"),i("td")],-1)),s[32]||(s[32]=i("tr",null,[i("td",null,"ToOne"),i("td",null,"T1"),i("td"),i("td",null,"执行 SQL 查询，返回 T1 实体所有字段的第一条记录，记录不存在时返回 null"),i("td")],-1)),s[33]||(s[33]=i("tr",null,[i("td",null,"ToAggregate<T>"),i("td",null,"List<T>"),i("td",null,"Lambda"),i("td",null,"执行 SQL 查询，返回指定字段的聚合结果（适合不需要 GroupBy 的场景）"),i("td")],-1)),s[34]||(s[34]=i("tr",null,[i("td",null,"Any"),i("td",null,"bool"),i("td"),i("td",null,"执行 SQL 查询，是否有记录"),i("td")],-1)),s[35]||(s[35]=i("tr",null,[i("td",null,"Sum"),i("td",null,"T"),i("td",null,"Lambda"),i("td",null,"指定一个列求和"),i("td")],-1)),s[36]||(s[36]=i("tr",null,[i("td",null,"Min"),i("td",null,"T"),i("td",null,"Lambda"),i("td",null,"指定一个列求最小值"),i("td")],-1)),s[37]||(s[37]=i("tr",null,[i("td",null,"Max"),i("td",null,"T"),i("td",null,"Lambda"),i("td",null,"指定一个列求最大值"),i("td")],-1)),s[38]||(s[38]=i("tr",null,[i("td",null,"Avg"),i("td",null,"T"),i("td",null,"Lambda"),i("td",null,"指定一个列求平均值"),i("td")],-1)),s[39]||(s[39]=i("tr",null,[i("td",null,"【分页】"),i("td"),i("td"),i("td"),i("td")],-1)),s[40]||(s[40]=i("tr",null,[i("td",null,"Count"),i("td",null,"long"),i("td"),i("td",null,"查询的记录数量"),i("td")],-1)),s[41]||(s[41]=i("tr",null,[i("td",null,"Count"),i("td",null,"<this>"),i("td",null,"out long"),i("td",null,"查询的记录数量，以参数 out 形式返回"),i("td")],-1)),s[42]||(s[42]=i("tr",null,[i("td",null,"Skip"),i("td",null,"<this>"),i("td",null,"int offset"),i("td",null,"查询向后偏移行数"),i("td")],-1)),s[43]||(s[43]=i("tr",null,[i("td",null,"Offset"),i("td",null,"<this>"),i("td",null,"int offset"),i("td",null,"查询向后偏移行数"),i("td")],-1)),s[44]||(s[44]=i("tr",null,[i("td",null,"Limit"),i("td",null,"<this>"),i("td",null,"int limit"),i("td",null,"查询多少条数据"),i("td")],-1)),s[45]||(s[45]=i("tr",null,[i("td",null,"Take"),i("td",null,"<this>"),i("td",null,"int limit"),i("td",null,"查询多少条数据"),i("td")],-1)),s[46]||(s[46]=i("tr",null,[i("td",null,"Page"),i("td",null,"<this>"),i("td",null,"int pageIndex, int pageSize"),i("td",null,"分页"),i("td")],-1)),s[47]||(s[47]=i("tr",null,[i("td",null,"【条件】"),i("td"),i("td"),i("td"),i("td")],-1)),s[48]||(s[48]=i("tr",null,[i("td",null,"Where"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"支持多表查询表达式，多次使用相当于 AND"),i("td")],-1)),s[49]||(s[49]=i("tr",null,[i("td",null,"WhereIf"),i("td",null,"<this>"),i("td",null,"bool, Lambda"),i("td",null,"支持多表查询表达式"),i("td")],-1)),i("tr",null,[s[24]||(s[24]=i("td",null,"Where",-1)),s[25]||(s[25]=i("td",null,"<this>",-1)),s[26]||(s[26]=i("td",null,"string, parms",-1)),i("td",null,[s[22]||(s[22]=l('原生 sql 语法条件，Where("id = @id", new { id = 1 } ,')),n(t,{to:"/guide/ado.html#%E5%8F%82%E6%95%B0%E5%8C%96"},{default:a(()=>s[21]||(s[21]=[l("注意前缀@,根据具体数据库决定")])),_:1}),s[23]||(s[23]=l(" 其他地方不再说明。同理 )"))]),s[27]||(s[27]=i("td",null,null,-1))]),s[50]||(s[50]=i("tr",null,[i("td",null,"WhereIf"),i("td",null,"<this>"),i("td",null,"bool, string, parms"),i("td",null,'原生 sql 语法条件，WhereIf(true, "id = @id", new { id = 1 }'),i("td")],-1)),s[51]||(s[51]=i("tr",null,[i("td",null,"WhereCascade"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"实现多表查询时，向每个表中附加条件"),i("td")],-1)),s[52]||(s[52]=i("tr",null,[i("td",null,"WhereDynamicFilter"),i("td",null,"<this>"),i("td",null,"DynamicFilterInfo"),i("td",null,"动态过滤条件(与前端交互)"),i("td")],-1)),s[53]||(s[53]=i("tr",null,[i("td",null,"【分组】"),i("td"),i("td"),i("td"),i("td")],-1)),s[54]||(s[54]=i("tr",null,[i("td",null,"GroupBy"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"按选择的列分组，GroupBy(a => a.Name)"),i("td",null,"GroupBy(a => new{a.Name,a.Time})")],-1)),s[55]||(s[55]=i("tr",null,[i("td",null,"GroupBy"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'按原生 sql 语法分组，GroupBy("concat(name, @cc)", new { cc = 1 })'),i("td")],-1)),s[56]||(s[56]=i("tr",null,[i("td",null,"Having"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'按原生 sql 语法聚合条件过滤，Having("count(name) = @cc", new { cc = 1 })'),i("td")],-1)),s[57]||(s[57]=i("tr",null,[i("td",null,"Disdinct"),i("td",null,"<this>"),i("td"),i("td",null,".Distinct().ToList(x => x.GroupName) 是对指定字段"),i("td")],-1)),s[58]||(s[58]=i("tr",null,[i("td",null,"【排序】"),i("td"),i("td"),i("td"),i("td")],-1)),s[59]||(s[59]=i("tr",null,[i("td",null,"OrderBy"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"按列排序，OrderBy(a => a.Time)，可多次使用"),i("td")],-1)),s[60]||(s[60]=i("tr",null,[i("td",null,"OrderByDescending"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"按列倒向排序，OrderByDescending(a => a.Time)"),i("td")],-1)),s[61]||(s[61]=i("tr",null,[i("td",null,"OrderBy"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'按原生 sql 语法排序，OrderBy("count(name) + @cc", new { cc = 1 })'),i("td")],-1)),s[62]||(s[62]=i("tr",null,[i("td",null,"OrderByPropertyName"),i("td",null,"string, bool"),i("td",null,"按属性名字符串排序（支持导航属性）"),i("td"),i("td")],-1)),s[63]||(s[63]=i("tr",null,[i("td",null,"【联表】"),i("td"),i("td"),i("td"),i("td")],-1)),s[64]||(s[64]=i("tr",null,[i("td",null,"LeftJoin"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"左联查询，可使用导航属性，或指定关联的实体类型"),i("td")],-1)),s[65]||(s[65]=i("tr",null,[i("td",null,"InnerJoin"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"联接查询，可使用导航属性，或指定关联的实体类型"),i("td")],-1)),s[66]||(s[66]=i("tr",null,[i("td",null,"RightJoin"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"右联查询，可使用导航属性，或指定关联的实体类型"),i("td")],-1)),s[67]||(s[67]=i("tr",null,[i("td",null,"LeftJoin"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'左联查询，使用原生 sql 语法，LeftJoin("type b on b.id = a.id and b.clicks > @clicks", new { clicks = 1 })'),i("td")],-1)),s[68]||(s[68]=i("tr",null,[i("td",null,"InnerJoin"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'联接查询，使用原生 sql 语法，InnerJoin("type b on b.id = a.id and b.clicks > @clicks", new { clicks = 1 })'),i("td")],-1)),s[69]||(s[69]=i("tr",null,[i("td",null,"RightJoin"),i("td",null,"<this>"),i("td",null,"string, parms"),i("td",null,'右联查询，使用原生 sql 语法，RightJoin("type b on b.id = a.id and b.clicks > @clicks", new { clicks = 1 })'),i("td")],-1)),s[70]||(s[70]=i("tr",null,[i("td",null,"From"),i("td",null,"<this>"),i("td",null,"Lambda"),i("td",null,"多表查询，3 个表以上使用非常方便，目前设计最大支持 10 个表"),i("td")],-1)),s[71]||(s[71]=i("tr",null,[i("td",null,"FromQuery"),i("td",null,"ISelect<T1, T2>"),i("td",null,"ISelect<T2>"),i("td",null,"单表连成双表查询"),i("td")],-1)),s[72]||(s[72]=i("tr",null,[i("td",null,"WithTempQuery"),i("td",null,"ISelect<T1>"),i("td",null,"Lambda"),i("td",null,"将单表或多表查询嵌套成单表查询"),i("td")],-1)),s[73]||(s[73]=i("tr",null,[i("td",null,"WithMemory"),i("td",null,"ISelect<T1>"),i("td",null,"List<T1>"),i("td",null,"使用内存数据查询"),i("td")],-1)),s[74]||(s[74]=i("tr",null,[i("td",null,"UnionAll"),i("td",null,"ISelect<T1>"),i("td",null,"ISelect<T1>[]"),i("td",null,"联合查询"),i("td")],-1)),s[75]||(s[75]=i("tr",null,[i("td",null,"【其他】"),i("td"),i("td"),i("td"),i("td")],-1)),s[76]||(s[76]=i("tr",null,[i("td",null,"As"),i("td",null,"<this>"),i("td",null,'string alias = "a"'),i("td",null,"指定别名"),i("td")],-1)),s[77]||(s[77]=i("tr",null,[i("td",null,"Master"),i("td",null,"<this>"),i("td"),i("td",null,"指定从主库查询（默认查询从库）"),i("td")],-1)),s[78]||(s[78]=i("tr",null,[i("td",null,"CommandTimeout"),i("td",null,"<this>"),i("td",null,"int"),i("td",null,"命令超时设置(秒)"),i("td")],-1)),s[79]||(s[79]=i("tr",null,[i("td",null,"WithTransaction"),i("td",null,"<this>"),i("td",null,"DbTransaction"),i("td",null,"设置事务对象"),i("td")],-1)),s[80]||(s[80]=i("tr",null,[i("td",null,"WithConnection"),i("td",null,"<this>"),i("td",null,"DbConnection"),i("td",null,"设置连接对象"),i("td")],-1)),s[81]||(s[81]=i("tr",null,[i("td",null,"WithLock"),i("td",null,"<this>"),i("td",null,"Enum"),i("td",null,"SqlServer NoLock 等特有的设置"),i("td")],-1)),s[82]||(s[82]=i("tr",null,[i("td",null,"ForUpdate"),i("td",null,"<this>"),i("td",null,"bool"),i("td",null,"排他更新锁，对不同的数据库已作适配，详细说明见注释"),i("td")],-1)),s[83]||(s[83]=i("tr",null,[i("td",null,"AsQueryable"),i("td",null,"IQueryable"),i("td"),i("td",null,"将 ISelect 转换为 IQueryable，此方法主要用于扩展，比如：abp IRepository GetAll() 接口方法需要返回 IQueryable 对象。注意：IQueryable 方法污染较为严重，请尽量避免此转换"),i("td")],-1)),s[84]||(s[84]=i("tr",null,[i("td",null,"ToTreeList()"),i("td",null,"List<TEntity>"),i("td",null,"无"),i("td",null,"将父子关系的数据以 TreeList 的形式返回"),i("td")],-1)),s[85]||(s[85]=i("tr",null,[i("td",null,"AsTreeCte()"),i("td",null,"ISelect"),i("td",null,"(up, pathSelector, level)"),i("td",null,"递归查询父子关系表"),i("td")],-1))])])])}const y=k(r,[["render",u],["__file","select.html.vue"]]),o=JSON.parse('{"path":"/guide/select.html","title":"查询","lang":"zh-CN","frontmatter":{"description":"查询 FreeSql 在查询数据下足了功夫，链式风格、多表查询、表达式函数、导航属性支持得非常到位。 表达式函数 更详细请前往 SqlServer WithLock/WithIndex 多表： 全局设置 NoLock： 动态过滤 WhereDynamicFilter 《高效理解 FreeSql WhereDynamicFilter，深入了解设计初衷》 ...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://freesql.net/en/guide/select.html"}],["meta",{"property":"og:url","content":"https://freesql.net/guide/select.html"}],["meta",{"property":"og:site_name","content":"FreeSql"}],["meta",{"property":"og:title","content":"查询"}],["meta",{"property":"og:description","content":"查询 FreeSql 在查询数据下足了功夫，链式风格、多表查询、表达式函数、导航属性支持得非常到位。 表达式函数 更详细请前往 SqlServer WithLock/WithIndex 多表： 全局设置 NoLock： 动态过滤 WhereDynamicFilter 《高效理解 FreeSql WhereDynamicFilter，深入了解设计初衷》 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-01-16T10:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-16T10:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"查询\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-16T10:00:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"nicye\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://freesql.net/atom.xml","title":"FreeSql Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://freesql.net/feed.json","title":"FreeSql JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://freesql.net/rss.xml","title":"FreeSql RSS Feed"}]]},"headers":[{"level":2,"title":"表达式函数","slug":"表达式函数","link":"#表达式函数","children":[]},{"level":2,"title":"SqlServer WithLock/WithIndex","slug":"sqlserver-withlock-withindex","link":"#sqlserver-withlock-withindex","children":[]},{"level":2,"title":"动态过滤 WhereDynamicFilter","slug":"动态过滤-wheredynamicfilter","link":"#动态过滤-wheredynamicfilter","children":[]},{"level":2,"title":"克隆查询 ISelect","slug":"克隆查询-iselect","link":"#克隆查询-iselect","children":[]},{"level":2,"title":"API","slug":"api","link":"#api","children":[]}],"git":{"createdTime":1612454598000,"updatedTime":1737021600000,"contributors":[{"name":"luoyunchong","username":"luoyunchong","email":"luoyunchong@foxmail.com","commits":2,"url":"https://github.com/luoyunchong"},{"name":"igeekfan","username":"igeekfan","email":"luoyunchong@foxmail.com","commits":3,"url":"https://github.com/igeekfan"},{"name":"2881099","username":"2881099","email":"2881099@users.noreply.github.com","commits":18,"url":"https://github.com/2881099"},{"name":"2881099","username":"2881099","email":"2881099@qq.com","commits":3,"url":"https://github.com/2881099"},{"name":"Mister-Hope","username":"Mister-Hope","email":"mister-hope@outlook.com","commits":1,"url":"https://github.com/Mister-Hope"}]},"readingTime":{"minutes":6.11,"words":1832},"filePathRelative":"guide/select.md","localizedDate":"2021年2月4日","autoDesc":true}');export{y as comp,o as data};
